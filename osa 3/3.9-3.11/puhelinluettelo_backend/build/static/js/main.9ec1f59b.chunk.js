(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(2),s=n.n(a),u=n(15),c=n.n(u),l=(n(6),n(3)),i=n(4),r=n.n(i),d="http://localhost:3001/api/persons",f=function(){return r.a.get(d)},j=function(e){return r.a.post(d,e)},m=function(e){return console.log("Poistetaan k\xe4ytt\xe4j\xe4 ID:",e),console.log("Osoitteesta",d,e),r.a.delete("".concat(d,"/").concat(e))},b=function(e,t){return r.a.put("".concat(d,"/").concat(e),t)},h=function(e){return Object(o.jsxs)("p",{children:[e.name," ",e.number,Object(o.jsx)("button",{onClick:function(){var t="Delete "+e.name;console.log(t),window.confirm(t)&&(console.log("Klikattu poista henkil\xf6\xf6n:",e.name,"jonka ID on",e.id),m(e.id).then((function(t){console.log("Palvelin vastasi uuteen tietoon:",t),e.setErrorMessage("Deleted ".concat(e.name)),setTimeout((function(){e.setErrorMessage(null)}),5e3),console.log("effect alkaa"),f().then((function(t){console.log("p\xe4ivitet\xe4\xe4n",t),e.setPersons(t.data)})),console.log("Dataa l\xf6ydetty:",t.length,"kpl")})).catch((function(t){console.log("Virhe poistaessa, tulostetaan virheilmoitus"),e.setErrorMessage("Name and number were already removed from server"),setTimeout((function(){e.setErrorMessage(null)}),5e3)})))},children:"delete"})]},e.id)},g=function(e){return console.log("Tulostetaan Ihmisten hallintaan k\xe4ytetty lista",e),Object(o.jsx)("div",{children:e.filteredPersons.map((function(t){return Object(o.jsx)(h,{name:t.name,number:t.number,id:t.id,setErrorMessage:e.setErrorMessage,setPersons:e.setPersons},t.id)}))})},v=function(e){return Object(o.jsxs)("div",{children:["filter shown with: ",Object(o.jsx)("input",{value:e.newFilter,onChange:e.filterMuuttuu})]})},O=function(e){return Object(o.jsxs)("form",{onSubmit:e.addNote,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.nimiMuuttuu})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.numeroMuuttuu})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.message;return null===t?null:"Name and number were already removed from server"===t?Object(o.jsx)("div",{className:"fail",children:t}):Object(o.jsx)("div",{className:"success",children:t})},x=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],u=Object(a.useState)(""),c=Object(l.a)(u,2),i=c[0],r=c[1],d=Object(a.useState)(""),m=Object(l.a)(d,2),h=m[0],x=m[1],w=Object(a.useState)(""),k=Object(l.a)(w,2),y=k[0],M=k[1],P=Object(a.useState)(null),N=Object(l.a)(P,2),C=N[0],E=N[1];Object(a.useEffect)((function(){console.log("effect alkaa"),f().then((function(e){console.log("effect -> promise fulfilled",e),s(e.data)}))}),[]),console.log("Dataa l\xf6ydetty:",n.length,"kpl");var S=n.filter((function(e){return e.name.toLocaleLowerCase().includes(y.toLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(p,{message:C}),Object(o.jsx)(v,{newFilter:y,filterMuuttuu:function(e){console.log("filtterikentt\xe4 muuttuu:",e.target.value),M(e.target.value)}}),Object(o.jsx)("h2",{children:"Add a new"}),Object(o.jsx)(O,{addNote:function(e){e.preventDefault(),console.log("Saatu sis\xe4lt\xf6",i);var t=n.map((function(e){return e.name}));console.log("Nimien listassa nyt:",t);var o={name:i,number:h};if(t.includes(i)){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var a=n.filter((function(e){return e.name===o.name}));b(a[0].id,o).then((function(e){console.log("Palvelin vastasi uuteen tietoon:",e),s(n.concat(e.data)),r(""),x(""),E("Updated number for ".concat(o.name)),setTimeout((function(){E(null)}),5e3)}))}}else console.log("Pusketaan listaan seuraavat tiedot severille: ",o),j(o).then((function(e){s(n.concat(e.data)),console.log("Palvelin vastasi uuteen tietoon:",e),r(""),x(""),E("Added ".concat(o.name)),setTimeout((function(){E(null)}),5e3)})),console.log("Listassa nyt: ",n)},newName:i,nimiMuuttuu:function(e){console.log("tekstikentt\xe4 muuttuu:",e.target.value),r(e.target.value)},newNumber:h,numeroMuuttuu:function(e){console.log("numerokentt\xe4 muuttuu:",e.target.value),x(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(g,{filteredPersons:S,setErrorMessage:E,setPersons:s})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,s=t.getLCP,u=t.getTTFB;n(e),o(e),a(e),s(e),u(e)}))};c.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(x,{})}),document.getElementById("root")),w()},6:function(e,t,n){}},[[39,1,2]]]);
//# sourceMappingURL=main.9ec1f59b.chunk.js.map